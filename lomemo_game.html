<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOMEMO</title>
    <style>
        @font-face {
            font-family: 'PixelFont';
            src: url('data:font/truetype;base64,') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            overflow: hidden;
            cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTQgMTBMMjIgMTJMMTQgMTRMMTIgMjJMMTAgMTRMMiAxMkwxMCAxMEwxMiAyWiIgZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4K') 12 12, auto;
            height: 100vh;
            position: relative;
        }

        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .title {
            font-family: 'Courier New', monospace;
            font-size: 4rem;
            font-weight: bold;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.5);
            margin-bottom: 2rem;
            letter-spacing: 0.2em;
            color: #ffffff;
        }

        .menu-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .layout-button {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-family: 'Helvetica', Arial, sans-serif;
            background: linear-gradient(45deg, #003366, #004080);
            border: 2px solid #4B1F1F;
            border-radius: 8px;
            color: white;
            cursor: inherit;
            transition: all 0.3s ease;
            min-width: 200px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .layout-button:hover {
            background: linear-gradient(45deg, #004080, #0056b3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .layout-button.completed {
            background: linear-gradient(45deg, #2d5a2d, #3d6b3d);
            border-color: #2d5a2d;
        }

        .game-container {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
        }

        .game-header {
            position: absolute;
            top: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            z-index: 1000;
        }

        .game-menu {
            display: flex;
            gap: 1rem;
        }

        .menu-button {
            padding: 0.5rem 1rem;
            background: rgba(0,0,0,0.7);
            border: 1px solid #4B1F1F;
            border-radius: 4px;
            color: white;
            cursor: inherit;
            font-family: 'Helvetica', Arial, sans-serif;
            transition: background 0.3s ease;
        }

        .menu-button:hover {
            background: rgba(0,0,0,0.9);
        }

        .timer {
            font-family: 'Helvetica', Arial, sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 10px;
            width: 80%;
            max-width: 900px;
            height: 70vh;
            margin: 0 auto;
            padding-top: 100px;
        }

        .card {
            background: #003366;
            border: 2px solid #4B1F1F;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: inherit;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            position: relative;
        }

        .card:hover {
            animation: wiggle 0.3s ease-in-out infinite;
        }

        @keyframes wiggle {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
        }

        .card.flipped {
            animation: flip 0.6s ease-in-out;
            background: white;
            border-color: #4B1F1F;
        }

        @keyframes flip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }

        .card.matched {
            animation: dissolve 0.6s ease-in-out forwards;
        }

        @keyframes dissolve {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.8); }
        }

        .card-shape {
            width: 60%;
            height: 60%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shape {
            fill: black;
            stroke: #4B1F1F;
            stroke-width: 2;
        }

        .end-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .end-message {
            font-family: 'Helvetica', Arial, sans-serif;
            font-size: 3rem;
            color: black;
            text-align: center;
        }

        .back-button {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            background: #003366;
            color: white;
            border: 2px solid #4B1F1F;
            border-radius: 8px;
            font-family: 'Helvetica', Arial, sans-serif;
            cursor: inherit;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #004080;
        }
    </style>
</head>
<body>
    <div class="container" id="mainMenu">
        <h1 class="title">LOMEMO</h1>
        <div class="menu-container">
            <button class="layout-button" onclick="startGame('yellow')">YELLOW</button>
            <button class="layout-button" onclick="startGame('red')">RED</button>
            <button class="layout-button" onclick="startGame('green')">GREEN</button>
            <button class="layout-button" onclick="startGame('blue')">BLUE</button>
            <button class="layout-button" onclick="startGame('pink')">PINK</button>
        </div>
    </div>

    <div class="game-container" id="gameContainer">
        <div class="game-header">
            <div class="game-menu">
                <button class="menu-button" onclick="resetTimer()">TIME</button>
                <button class="menu-button" onclick="backToMenu()">MENU</button>
            </div>
            <div class="timer" id="timer">20:00</div>
        </div>
        <div class="game-grid" id="gameGrid"></div>
    </div>

    <div class="end-screen" id="endScreen">
        <div class="end-message" id="endMessage"></div>
        <button class="back-button" onclick="backToMenu()">Back to Menu</button>
    </div>

    <script>
        // Game state
        let gameState = {
            completedLayouts: [],
            timerRemaining: 1200, // 20 minutes in seconds
            sessionStarted: false,
            currentLayout: null,
            flippedCards: [],
            matchedPairs: 0,
            isProcessing: false,
            timerInterval: null
        };

        // Shape definitions
        const shapes = [
            '<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="30" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="50,20 20,70 80,70" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><circle cx="30" cy="30" r="15" class="shape"/><circle cx="70" cy="30" r="15" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="50,15 25,40 75,40" class="shape"/><polygon points="50,85 25,60 75,60" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="20" y="20" width="25" height="25" class="shape"/><rect x="55" y="20" width="25" height="25" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><circle cx="50" cy="25" r="15" class="shape"/><polygon points="50,45 35,65 65,65" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="35" y="20" width="30" height="30" class="shape"/><circle cx="50" cy="70" r="15" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="25,25 75,25 75,50 50,75 25,50" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><circle cx="25" cy="50" r="20" class="shape"/><rect x="50" y="30" width="30" height="40" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="50,20 30,40 30,60 50,80 70,60 70,40" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="20" y="35" width="60" height="30" class="shape"/><circle cx="50" cy="50" r="10" fill="white" stroke="#4B1F1F"/></svg>',
            '<svg viewBox="0 0 100 100"><polygon points="50,15 25,35 35,65 65,65 75,35" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><circle cx="35" cy="35" r="20" class="shape"/><polygon points="65,20 55,50 85,50" class="shape"/></svg>',
            '<svg viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="20" class="shape"/><rect x="35" y="45" width="30" height="30" class="shape"/></svg>'
        ];

        // Seeded random number generator
        function mulberry32(seed) {
            return function() {
                let t = seed += 0x6D2B79F5;
                t = Math.imul(t ^ t >>> 15, t | 1);
                t ^= t + Math.imul(t ^ t >>> 7, t | 61);
                return ((t ^ t >>> 14) >>> 0) / 4294967296;
            };
        }

        // Simple hash function for seed generation
        function hash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32-bit integer
            }
            return Math.abs(hash);
        }

        // Generate seeded layout
        function generateSeededLayout(seedName) {
            const seed = hash(seedName);
            const deck = [...Array(15).keys(), ...Array(15).keys()];
            const rng = mulberry32(seed);
            
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            
            return deck;
        }

        // Timer functions
        function startTimer() {
            if (!gameState.sessionStarted) {
                gameState.sessionStarted = true;
                gameState.timerInterval = setInterval(updateTimer, 1000);
            }
        }

        function updateTimer() {
            const minutes = Math.floor(gameState.timerRemaining / 60);
            const seconds = gameState.timerRemaining % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (gameState.timerRemaining <= 0) {
                clearInterval(gameState.timerInterval);
                endGame(false);
                return;
            }
            
            gameState.timerRemaining--;
        }

        function resetTimer() {
            clearInterval(gameState.timerInterval);
            gameState.timerRemaining = 1200;
            gameState.sessionStarted = false;
            gameState.completedLayouts = [];
            updateLayoutButtons();
            document.getElementById('timer').textContent = '20:00';
        }

        // Game functions
        function startGame(layout) {
            gameState.currentLayout = layout;
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.isProcessing = false;
            
            startTimer();
            
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            
            createGameGrid(layout);
        }

        function createGameGrid(layout) {
            const grid = document.getElementById('gameGrid');
            grid.innerHTML = '';
            
            const cardOrder = generateSeededLayout(layout);
            
            cardOrder.forEach((shapeIndex, cardIndex) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.shapeIndex = shapeIndex;
                card.dataset.cardIndex = cardIndex;
                card.onclick = () => flipCard(card);
                
                const cardShape = document.createElement('div');
                cardShape.className = 'card-shape';
                cardShape.style.display = 'none';
                cardShape.innerHTML = shapes[shapeIndex];
                
                card.appendChild(cardShape);
                grid.appendChild(card);
            });
        }

        function flipCard(card) {
            if (gameState.isProcessing || 
                card.classList.contains('flipped') || 
                card.classList.contains('matched') ||
                gameState.flippedCards.length >= 2) {
                return;
            }

            card.classList.add('flipped');
            card.querySelector('.card-shape').style.display = 'flex';
            gameState.flippedCards.push(card);

            if (gameState.flippedCards.length === 2) {
                gameState.isProcessing = true;
                setTimeout(checkMatch, 500);
            }
        }

        function checkMatch() {
            const [card1, card2] = gameState.flippedCards;
            const shape1 = card1.dataset.shapeIndex;
            const shape2 = card2.dataset.shapeIndex;

            if (shape1 === shape2) {
                // Match found
                card1.classList.add('matched');
                card2.classList.add('matched');
                gameState.matchedPairs++;

                setTimeout(() => {
                    card1.style.display = 'none';
                    card2.style.display = 'none';
                }, 600);

                if (gameState.matchedPairs === 15) {
                    // Layout completed
                    setTimeout(() => {
                        completeLayout();
                    }, 1000);
                }
            } else {
                // No match
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.querySelector('.card-shape').style.display = 'none';
                    card2.querySelector('.card-shape').style.display = 'none';
                }, 1000);
            }

            gameState.flippedCards = [];
            gameState.isProcessing = false;
        }

        function completeLayout() {
            if (!gameState.completedLayouts.includes(gameState.currentLayout)) {
                gameState.completedLayouts.push(gameState.currentLayout);
            }
            
            updateLayoutButtons();
            
            if (gameState.completedLayouts.length === 5) {
                endGame(true);
            } else {
                backToMenu();
            }
        }

        function updateLayoutButtons() {
            const buttons = document.querySelectorAll('.layout-button');
            buttons.forEach(button => {
                const layout = button.textContent.toLowerCase();
                if (gameState.completedLayouts.includes(layout)) {
                    button.classList.add('completed');
                } else {
                    button.classList.remove('completed');
                }
            });
        }

        function backToMenu() {
            document.getElementById('gameContainer').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
            document.getElementById('endScreen').style.display = 'none';
        }

        function endGame(won) {
            clearInterval(gameState.timerInterval);
            document.getElementById('endMessage').textContent = won ? 'YOU WIN' : 'YOU LOST';
            document.getElementById('endScreen').style.display = 'flex';
        }

        // Initialize game
        updateLayoutButtons();
    </script>
</body>
</html>